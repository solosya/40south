{% set articleCount = 0 %}
{% set cardIndex = 0 %}

{% set popularArticles = _Article.getPopularArticles({ limit: 4, sortBy: 'VIEWS', scope: 'network' }) %}

<div class="row" data-section="00">
    
    
    <div class="col-12 col-lg-9">


        <div class="row">
            <div class="col-12">
            {% if articles[articleCount] %}
                {{this.render('../_single-article.twig', {
                    article: articles[articleCount], 
                    position: (articleCount+1),
                    imageSize: {width: 720, height: 420},
                    containerClass: "card-1-mobile card-1-tablet card-1-desktop"
                }) | raw}}
                {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
            {% endif %}
            </div>
        </div>
        <hr class="o-rule">
        <div class="row">
        
            {% if articles[articleCount] %}
                <div class="col-12 col-md-4 u-border-right">
                    {{this.render('../_single-article.twig', {
                        article: articles[articleCount], 
                        position: (articleCount+1),
                        imageSize: {width: 296, height: 260},
                        containerClass: "card-3-mobile card-3-tablet card-3-desktop"
                    }) | raw}}
                    {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                </div>
            {% endif %}
            <div class="col-12 col-md-4 u-border-right">
                <ul class="row c-news-feed__list">

                    {% for i in 0..3 if popularArticles[i] %}
                        {% set displayClass = i > 2 ? 'd-sm-block d-md-none d-lg-block' : '' %}
                            <li class="col-sm-12 col-md-4 col-lg-12 {{displayClass}}">
                                {{this.render('../_single-article.twig', {
                                    article: popularArticles[i], 
                                    imageSuppress: true,
                                    containerClass: "card-11-mobile card-11-tablet card-11-desktop"
                                }) | raw}}
                                
                            </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-12 col-md-4">
                {% if adslots[0] is defined %}
                    <div class="j-adslot" id="{{adslots[0]}}" data-adshape="mrec"></div>
                {% endif %}
            </div>
            
        </div>

    </div>

</div>
